{"mappings":"oeAAAA,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,wMCIzD,MAAMC,GAAO,EAFbJ,EAAA,SAEaK,WAiBb,MAAMC,EAAU,IAfhB,MACEC,GAAY,4CACZC,OAAS,KAETC,sBACE,IACE,MAAMC,QAAiBC,MAAM,GAAGC,MAAKL,KAAaK,KAAKJ,UAEvD,aADmBE,EAASG,M,CAE5B,MAAOC,GACPC,QAAQC,IAAIF,EAAMG,Q,IAalBC,EAAWC,SAASC,cAAc,qBAElCC,EACJnB,KAAKC,MAAMmB,aAAaC,QAJQ,sBAI+B,GAY3C,SAAbC,EAAuBC,GARC,IAAXC,EAUHL,EAAaM,MAC5BC,GAAiBA,EAAcC,MAAQJ,EAAKI,MAG5Cd,QAAQC,IAAI,0BAdMU,EAiBPD,EAfQJ,EAARS,KAAKJ,GAEFJ,aAAHS,QAZmB,mBAYgB7B,KAAK8B,UAAUX,I,CAPjEN,QAAQC,IAAIK,GA0CZH,EAASe,iBAAiB,SAnBnBxB,eAA0CyB,GAG/C,IACE,MAAMT,QAAanB,EAAQ6B,sBACVX,EAAuBC,GAIxC,GAHiBJ,EAAaM,MAC5BC,GAAiBA,EAAcC,MAAQJ,EAAKI,MAK5C,OAFAd,QAAQC,IAAI,0BACGE,EAANkB,YAAc,O,CAGzB,MAAOC,GACPtB,QAAQC,IAAIqB,E,WCvEhBC,EAAiB,IAAAC,IAAoBvC,EAAA,SAAAwC,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FC,EAAiB,IAAAN,IAAoBvC,EAAA,SAAAwC,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MFmJ5F,SAASE,IACP1C,EAAK2C,WAAWC,UAAUC,OAAO,Y,CGpJnCC,EAAiB,IAAAX,IAAoBvC,EAAA,SAAAwC,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,WHiJ5FxC,EAAK+C,kBAAkBlB,iBAAiB,SAlEjCxB,eAAiCyB,GAEtC5B,EAAQE,OAAS,2BAEjB,IACE,MAAMiB,QAAanB,EAAQ6B,gBAC3BW,IACA1C,EAAKgD,eAAeC,UAejB,SAAqB5B,GAC1B,MAAMI,IACJA,EAAGyB,WACHA,EAAUC,OACVA,EAAMC,MACNA,EAAKC,YACLA,EAAWC,mBACXA,EACAC,WAAYC,EAAQC,EAAOC,EAAOC,EAASC,EAAUC,IACnDxC,EAEEyC,EAAiB,IAAA3B,IAAAD,GAGrB6B,KACIC,EAAe,IAAA7B,IAAAM,GAClBsB,KACGE,EAAa,IAAA9B,IAAAW,GAChBiB,KAGH,MAAO,yEAEmCb,qGAEAE,qDACCD,mDACFE,kGAEMC,8EACOW,8FAEPR,EAAMlB,+EACAuB,oGAENF,EAASrB,yEACTyB,uH,CAnDbE,CAAY7C,GAK5C,GAHiBJ,EAAaM,MAC5BC,GAAiBA,EAAcC,MAAQJ,EAAKI,MAK5C,OAFAd,QAAQC,IAAI,8BACZE,EAASkB,YAAc,O,CAGzB,MAAOC,GACPtB,QAAQC,IAAIqB,E,KAuDhBjC,EAAKmE,mBAAmBtC,iBACtB,SAIF,SAAuCC,GACrCY,IACA1C,EAAKgD,eAAeC,UAAY,E,IAIlCmB,OAAOvC,iBAAiB,WAAWC,IACnB,WAAVA,EAAEuC,KACJ3B,GAAa,IAOjB1C,EAAKsE,cAAczC,iBAAiB,SAEpC,SAAkCC,GAChCA,EAAEyC,OAAOvC,YAAc,gCACvBF,EAAEyC,OAAOC,mBACP,WACA,2J","sources":["node_modules/@parcel/runtime-js/lib/runtime-cf1e95757f069beb.js","src/js/modal.js","node_modules/@parcel/runtime-js/lib/runtime-cf36cf5ab5731be9.js","node_modules/@parcel/runtime-js/lib/runtime-ec45650cc0a3e24f.js","node_modules/@parcel/runtime-js/lib/runtime-5d2ea5d597251bbc.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"Ujaud\\\":\\\"index.44257de7.js\\\",\\\"3dsh1\\\":\\\"apple-books.652b354e.png\\\",\\\"1Fi3j\\\":\\\"book-shop.1d091ebd.png\\\",\\\"6GerT\\\":\\\"amazon.626c9508.png\\\"}\"));","// import BooksApi from './api';\n\nimport getRefs from './refs.js';\n\nconst refs = getRefs();\n\nclass BooksApi {\n  #BASE_URL = `https://books-backend.p.goit.global/books`;\n  bookID = null;\n\n  async fetchBookByID() {\n    try {\n      const response = await fetch(`${this.#BASE_URL}/${this.bookID}`);\n      const book = await response.json();\n      return book;\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n}\n\nconst BookAPI = new BooksApi();\n\n// const modalContentEl = document.querySelector('.modal-pop-up-content');\n\n// --------------------------------------//////// код юра\n// --------------------------------------////////\n// --------------------------------------////////\nconst SHOPPING_LIST_STORAGE_KEY = 'storage-of-books'; // ключ\nconst addBtnEL = document.querySelector('.modal-pop-up-btn');\n\nconst shoppingList =\n  JSON.parse(localStorage.getItem(SHOPPING_LIST_STORAGE_KEY)) || [];\nconsole.log(shoppingList);\n\n// Функція для додавання товару у корзину\nfunction addToStorage(book) {\n  // Додаємо товар до корзини\n  shoppingList.push(book);\n  // Зберігаємо зміни в LocalStorage\n  localStorage.setItem(SHOPPING_LIST_STORAGE_KEY, JSON.stringify(shoppingList));\n}\n\n// Додавання книги у корзину\nfunction handleAddBookInStorage(data) {\n  //   Фільтрування унікальності книги\n  const isBookId = shoppingList.find(\n    bookInStorage => bookInStorage._id === data._id\n  );\n  if (isBookId) {\n    console.log('Ця книга вже у кошику');\n    return;\n  }\n  addToStorage(data);\n}\n\nexport async function handleBookElClickToStorage(e) {\n  // BookAPI.bookID = '643282b1e85766588626a080';\n\n  try {\n    const data = await BookAPI.fetchBookByID();\n    const fn = await handleAddBookInStorage(data);\n    const isBookId = shoppingList.find(\n      bookInStorage => bookInStorage._id === data._id\n    );\n    if (isBookId) {\n      console.log('добавлено у кошик');\n      addBtnEL.textContent = 'STOP';\n      return;\n    }\n  } catch (err) {\n    console.log(err);\n  }\n}\n\naddBtnEL.addEventListener('click', handleBookElClickToStorage);\n// ----------------------------------------////\n// ----------------------------------------////\n// ----------------------------------------////\nexport async function handleBookElClick(e) {\n  // const id = e.target.attributes.data_id.value;\n  BookAPI.bookID = '643282b1e85766588626a080';\n\n  try {\n    const data = await BookAPI.fetchBookByID();\n    toggleModal();\n    refs.modalContentEl.innerHTML = createModal(data);\n\n    const isBookId = shoppingList.find(\n      bookInStorage => bookInStorage._id === data._id\n    );\n    if (isBookId) {\n      console.log('Ця книга вже у кошику');\n      addBtnEL.textContent = 'STOP';\n      return;\n    }\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nexport function createModal(data) {\n  const {\n    _id,\n    book_image,\n    author,\n    title,\n    description,\n    amazon_product_url,\n    buy_links: [amazon, apple, bandn, million, bookshop, indie],\n  } = data;\n\n  const appleBooksIcon = new URL(\n    '../images/shops/apple-books.png',\n    import.meta.url\n  ).href;\n  const bookShopIcon = new URL('../images/shops/book-shop.png', import.meta.url)\n    .href;\n  const amazonIcon = new URL('../images/shops/amazon.png', import.meta.url)\n    .href;\n  // addBtnEL.setAttribute('data_idi', `${_id}`);\n\n  return `\n                        \n              <img class=\"modal-img\" src=\"${book_image}\"/>\n              <div class='modal-book-atributes'>\n              <p class=\"modal-book-title\">${title}</p>\n              <p class=\"modal-book-author\">${author}</p>\n              <p class=\"modal-book-desc\">${description}</p>\n              <div class=\"modal-shops\">\n              <a class=\"modal-shop-link\" href=\"${amazon_product_url}\" target=\"_blank\">\n              <img class=\"modal-shop-img amazon\" src=\"${amazonIcon}\" alt=\"Amazon link\"/>\n              </a>\n              <a class=\"modal-shop-link\" href=\"${apple.url}\" target=\"_blank\">\n              <img class=\"modal-shop-img apple\" src=\"${appleBooksIcon}\" alt=\"Apple Books link\" />\n              </a>\n              <a class=\"modal-shop-link\" href=\"${bookshop.url}\" target=\"_blank\">\n              <img class=\"modal-shop-img\" src=\"${bookShopIcon}\" alt=\"Book Shop link\"/>\n              </a>\n              </div>\n              </div>\n              \n          `;\n}\n\nrefs.openModalPopUpBtn.addEventListener('click', handleBookElClick);\n\nfunction toggleModal() {\n  refs.modalPopUp.classList.toggle('is-hidden');\n}\n\n// Close PopUp Modal by Close btn click\nrefs.closeModalPopUpBtn.addEventListener(\n  'click',\n  handleModalPopUpCloseBtnClick\n);\n\nfunction handleModalPopUpCloseBtnClick(e) {\n  toggleModal();\n  refs.modalContentEl.innerHTML = '';\n}\n\n// Close PopUp Modal by Esc click\nwindow.addEventListener('keydown', e => {\n  if (e.key === 'Escape') {\n    toggleModal();\n  }\n});\n\n// Close PopUp Modal by backdrop click\n// !!!\n\nrefs.modalPopUpBtn.addEventListener('click', handleModalPopUpBtnClick);\n\nfunction handleModalPopUpBtnClick(e) {\n  e.target.textContent = 'Remove from the shopping list';\n  e.target.insertAdjacentHTML(\n    'afterend',\n    '<p class=\"modal-message\">Congratulations! You have added the book to the shopping list. To delete, press the button \"Remove from the shopping list.\"</p>'\n  );\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"3dsh1\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"1Fi3j\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"6GerT\")).toString();"],"names":["parcelRequire","register","JSON","parse","$8a7e756c566dd1ea$var$refs","default","$8a7e756c566dd1ea$var$BookAPI","BASE_URL","bookID","async","response","fetch","this","json","error","console","log","message","$8a7e756c566dd1ea$var$addBtnEL","document","querySelector","$8a7e756c566dd1ea$var$shoppingList","localStorage","getItem","$8a7e756c566dd1ea$var$handleAddBookInStorage","data","book","find","bookInStorage","_id","push","setItem","stringify","addEventListener","e","fetchBookByID","textContent","err","$d738d95b51fb9d81$exports","URL","resolve","import","meta","url","toString","$65b5bcf5299cbc56$exports","$8a7e756c566dd1ea$var$toggleModal","modalPopUp","classList","toggle","$e5cfff40304e52c1$exports","openModalPopUpBtn","modalContentEl","innerHTML","book_image","author","title","description","amazon_product_url","buy_links","amazon","apple","bandn","million","bookshop","indie","appleBooksIcon","href","bookShopIcon","amazonIcon","$8a7e756c566dd1ea$export$b63bc83cbdd7b6d5","closeModalPopUpBtn","window","key","modalPopUpBtn","target","insertAdjacentHTML"],"version":3,"file":"index.44257de7.js.map"}