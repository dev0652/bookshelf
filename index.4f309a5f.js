!function(){function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},a=e.parcelRequired7c6;null==a&&((a=function(t){if(t in o)return o[t].exports;if(t in n){var e=n[t];delete n[t];var a={id:t,exports:{}};return o[t]=a,e.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){n[t]=e},e.parcelRequired7c6=a),a("iE7OH").register(JSON.parse('{"EVgbq":"index.4f309a5f.js","4j2Vp":"apple-books.652b354e.png","gUbv1":"book-shop.1d091ebd.png","dRQ8R":"amazon.626c9508.png","6IOdw":"shopping-list.c1ee05b7.js","eGKFy":"index.dc9d90b0.js"}'));var i=a("4Nugj");a("j1lrD"),a("ahIRe"),a("9v99b");var l=a("dIxxU");i=a("4Nugj");const{categoryListEl:s}=(0,i.default)();!async function(){try{const t=(await async function(){try{const{data:t}=await l.default.get("https://books-backend.p.goit.global/books/category-list");return t}catch(t){console.log(t)}}()).sort(((t,e)=>t.list_name.localeCompare(e.list_name)));for(const e of t){const t=document.createElement("li"),o=document.createElement("button");o.classList.add("category-btn"),o.textContent=`${e.list_name}`,s.appendChild(t),t.appendChild(o)}}catch(t){console.log(t)}}();i=a("4Nugj");const{categoryListEl:c,allCategoriesBtn:r}=(0,i.default)();c.addEventListener("click",(function(t){if(t.preventDefault(),"BUTTON"!==t.target.nodeName)return;const e=t.target,o=document.querySelector(".active-category");o&&o!==e&&o.classList.remove("active-category"),e.classList.add("active-category")})),console.log("categoryListEl: ",c);i=a("4Nugj");const{categoryListEl:d,titleEl:g}=(0,i.default)();let u="";d.addEventListener("click",(function(t){if(t.target.classList.contains("category-btn")){const e=t.target.textContent,o=e.split(" ");u=o[o.length-1];const n=e.split(" ").slice(0,-1).join(" ");g.textContent=n,g.innerHTML+=` <span class="home-bs__title-part">${u}</span>`}}));i=a("4Nugj"),l=a("dIxxU");var p=a("6JpON");async function m(){t(p).Loading.dots();try{const{data:e}=await l.default.get("https://books-backend.p.goit.global/books/top-books");return t(p).Loading.remove(),e}catch(e){t(p).Loading.remove(),t(p).Notify.failure("Something went wrong. Please try again"),console.log(e)}}function f(t){return`\n\t\t\t\t\t\t<a class="book-item-link" href="" aria-label="Book thumbnail">\n\t\t\t\t\t\t\t<div class="book-item-thumb">\n\n\t\t\t\t\t\t\t\t<img class="book-image" src="${t.book_image}"  loading="lazy" data_id=${t._id} />\n\n\t\t\t\t\t\t\t\t<div class="book-image-overlay">\n\t\t\t\t\t\t\t\t\t<p class="book-image-overlay-text">Quick view</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class="book-item-meta">\n\t\t\t\t\t\t\t\t<h3 class="book-title">${t.title}</h3>\n       \t\t\t\t\t<p class="book-author"> ${t.author}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\n        `}i=a("4Nugj");const{categoryContainerEl:b}=(0,i.default)();async function h(){try{const t=await m(),e=document.createElement("ul");for(const o of t){const t=document.createElement("li");t.classList.add("home-category");const n=document.createElement("h2");n.classList.add("home-category-title"),t.appendChild(n),n.innerText=o.list_name,e.appendChild(t);const a=document.createElement("ul");a.classList.add("books-list");for(const e of o.books){const o=document.createElement("li");o.classList.add("book-item"),o.innerHTML=f(e),a.appendChild(o),t.appendChild(a)}const i=document.createElement("button");i.classList.add("button"),i.classList.add("see-more-btn"),i.innerText="See more",t.appendChild(i)}b.appendChild(e)}catch(t){console.log(t)}}h();const{allCategoriesBtn:k,categoryContainerEl:v,titleEl:y}=(0,i.default)();k.addEventListener("click",(async function(t){t.preventDefault(),y.innerHTML='Best Sellers <span class="home-bs__title-part">Books</span>',v.innerHTML="",await h()})),a("xpKCW");l=a("dIxxU"),p=a("6JpON"),i=a("4Nugj");const{categoryListEl:E,categoryContainerEl:L}=(0,i.default)();E.addEventListener("click",(async function(e){if(e.preventDefault(),"BUTTON"!==e.target.nodeName)return;let o;const n=await async function(e){t(p).Loading.dots("Please wait");const o=e.target.textContent;try{const{data:e}=await l.default.get(`https://books-backend.p.goit.global/books/category?category=${o}`);return t(p).Loading.remove(),e}catch(e){t(p).Loading.remove(),t(p).Notify.failure("Something went wrong. Please try again"),console.log(e)}}(e);o=n,async function(t){L.innerHTML="";const e=t,o=document.createElement("ul");try{for(const t of e){const e=document.createElement("li");e.innerHTML=`<img src="${t.book_image}" width="${t.book_image_width}" height="${t.book_image_height}" alt="bookcover of ${t.title}" /><h3>${t.title}</h3><h4>${t.author}</h4>`,o.appendChild(e)}L.appendChild(o)}catch(t){console.log(t)}}(o)}));const _=(0,(i=a("4Nugj")).default)();const w=new class{#t="https://books-backend.p.goit.global/books";bookID=null;async fetchBookByID(){try{const t=await fetch(`${this.#t}/${this.bookID}`);return await t.json()}catch(t){console.log(t.message)}}},C="storage-of-books",N=document.querySelector(".modal-pop-up-btn"),$=JSON.parse(localStorage.getItem(C))||[];function x(t){var e;$.find((e=>e._id===t._id))?console.log("Ця книга вже у кошику"):(e=t,$.push(e),localStorage.setItem(C,JSON.stringify($)))}async function H(t){w.bookID=t.target.attributes.data_id.value;try{const t=await w.fetchBookByID();R(),_.modalContentEl.innerHTML=function(t){const{_id:e,book_image:o,author:n,title:a,description:i,amazon_product_url:l,buy_links:[s,c,r,d,g,u]}=t,p=new URL(B).href,m=new URL(S).href,f=new URL(U).href;return`\n                        \n              <img class="modal-img" src="${o}"/>\n              <div class='modal-book-atributes'>\n              <p class="modal-book-title">${a}</p>\n              <p class="modal-book-author">${n}</p>\n              <p class="modal-book-desc">${i}</p>\n              <div class="modal-shops">\n              <a class="modal-shop-link" href="${l}" target="_blank">\n              <img class="modal-shop-img amazon" src="${f}" alt="Amazon link"/>\n              </a>\n              <a class="modal-shop-link" href="${c.url}" target="_blank">\n              <img class="modal-shop-img apple" src="${p}" alt="Apple Books link" />\n              </a>\n              <a class="modal-shop-link" href="${g.url}" target="_blank">\n              <img class="modal-shop-img" src="${m}" alt="Book Shop link"/>\n              </a>\n              </div>\n              </div>\n              \n          `}(t);if($.find((e=>e._id===t._id)))return console.log("Ця книга вже у кошику"),void(N.textContent="STOP")}catch(t){console.log(t)}}console.log($),N.addEventListener("click",(async function(t){try{const t=await w.fetchBookByID();await x(t);if($.find((e=>e._id===t._id)))return console.log("добавлено у кошик"),void(N.textContent="STOP")}catch(t){console.log(t)}}));var B={};B=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("4j2Vp");var S={};S=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("gUbv1");var U={};function R(){_.modalPopUp.classList.toggle("is-hidden")}function T(t){R(),_.modalContentEl.innerHTML=""}function O(t){"Escape"===t.key&&R()}function j(t){t.target==_.modalPopUp&&R()}U=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("dRQ8R"),_.categoryContainerEl.addEventListener("click",(function(t){t.target.matches(".book-image")&&(t.preventDefault(),H(t))})),_.closeModalPopUpBtn.addEventListener("click",T),_.closeModalPopUpBtn.removeEventListener("click",T),window.addEventListener("keydown",O),window.removeEventListener("keydown",O),window.addEventListener("click",j),window.removeEventListener("click",j),a("2NTPx");var D=a("hEzkB");a("bX5OU");(0,i.default)().authForm.addEventListener("submit",D.validateOnSubmit)}();
//# sourceMappingURL=index.4f309a5f.js.map
