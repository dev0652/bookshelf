{"mappings":"mkBAAA,aACAA,OAAOC,eAAeC,EAAAC,QAAS,aAAc,CACzCC,OAAO,IAEXF,EAAAC,QAAQE,QACR,SAAsCC,EAAUC,EAAYC,GACxD,IAAKD,EAAWE,IAAIH,GAChB,MAAM,IAAII,UAAU,gBAAkBF,EAAS,kCAEnD,OAAOD,EAAWI,IAAIL,E,uCCT1B,aACAN,OAAOC,eAAeC,EAAAC,QAAS,aAAc,CACzCC,OAAO,IAEXF,EAAAC,QAAQE,QACR,SAAkCC,EAAUM,GACxC,OAAIA,EAAWD,IACJC,EAAWD,IAAIE,KAAKP,GAExBM,EAAWR,K,uCCTtB,aACAJ,OAAOC,eAAeC,EAAAC,QAAS,aAAc,CACzCC,OAAO,IAEXF,EAAAC,QAAQE,QACR,SAAoCS,EAAKC,GACrC,GAAIA,EAAkBN,IAAIK,GACtB,MAAM,IAAIJ,UAAU,iE,KCP5BM,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,wMCEzD,IAAAC,EAAAJ,EAAA,S,kBCDAhB,OAAOC,eAAeoB,EAAS,aAAc,CACzCjB,OAAO,IAEXiB,EAAQhB,QAGR,SAA+BC,EAAUC,GACrC,IAAIK,EAAaU,EAAkCjB,QAAQC,EAAUC,EAAY,OACjF,OAAOgB,EAA8BlB,QAAQC,EAAUM,E,EAJ3D,IAAIU,EAA+BE,EAAuBR,EAAA,UACtDO,EAA2BC,EAAuBR,EAAA,UAKtD,SAASQ,EAAuBV,GAC5B,OAAOA,GAAOA,EAAIW,WAAaX,EAAM,CACjCT,QAASS,E,UCZjBd,OAAOC,eAAeyB,EAAS,aAAc,CACzCtB,OAAO,IAEXsB,EAAQrB,QAER,SAAgCS,EAAKP,EAAYH,GAC7CuB,EAAgCtB,QAAQS,EAAKP,GAC7CA,EAAWqB,IAAId,EAAKV,E,EAHxB,IAKgCU,EAL5Ba,GAK4Bb,EALwBE,EAAA,WAMtCF,EAAIW,WAAaX,EAAM,CACjCT,QAASS,G,wDFRXe,GAAO,E,WAAAxB,WAGXyB,EAAS,IAAAC,QAcLC,EAAU,IAAb,W,sBAfGC,I,aACJC,EAAAR,EAAA,CAAAS,KAAAL,EAAS,C,kBAAI,8CACbI,EAAAE,EAAA,CAAAD,KAAA,SAAS,K,iBAEHE,IAAA,gB,MAAN,W,kBAAAH,EAAAd,EAAA,CAAAc,EAAAI,GAAAC,MAAA,SAAAC,I,IAEUC,EACAC,E,2FADiBC,MAAM,GAAqBC,OAAWV,EAAAb,EAAA,CAAAwB,EAAvBf,GAAS,KAAec,OAAZC,EAAKC,S,cAAjDL,EAAQM,EAAAC,K,SACKP,EAASQ,O,cAAtBP,EAAIK,EAAAC,K,kBACHN,G,kCAEPQ,QAAQC,IAAIJ,EAAAK,GAAMC,S,yDANtB,E,OAWC,IAOGC,EAA4B,mBAC5BC,EAAWC,SAASC,cAAc,qBAElCC,EACJxC,KAAKC,MAAMwC,aAAaC,QAAQN,KAA+B,GAY3C,SAAbO,EAAuBC,GAED,IAVTpB,EAUHgB,EAAaK,MAC5B,SAAAC,G,OAAiBA,EAAcC,MAAQH,EAAKG,G,IAG5Cf,QAAQC,IAAI,0BAdMT,EAiBPoB,EAfQJ,EAARQ,KAAKxB,GAEFiB,aAAHQ,QAAQb,EAA2BpC,KAAKkD,UAAUV,I,UAgB3CW,I,OAAAA,EAAfnC,EAAAd,EAAA,CAAAc,EAAAI,GAAAC,MAAA,SAAAC,EAA0C8B,G,IAIvCR,E,2FAAa9B,EAAQuC,gB,cAArBT,EAAIf,EAAAC,K,SACOa,EAAuBC,G,UAAhCf,EAAAC,MACSU,EAAaK,MAC5B,SAAAC,G,OAAiBA,EAAcC,MAAQH,EAAKG,G,IAElC,C,uBACVf,QAAQC,IAAI,qBACGI,EAANiB,YAAc,O,6EAIzBtB,QAAQC,IAAGJ,EAAAK,I,2DAfiCqB,MAAAtC,KAAAuC,U,UAuB1BC,I,OAAAA,EAAfzC,EAAAd,EAAA,CAAAc,EAAAI,GAAAC,MAAA,SAAAC,EAAiC8B,G,IAK9BR,E,yEAHR9B,EAAQc,OAAS,2B,kBAGId,EAAQuC,gB,UAArBT,EAAIf,EAAAC,KACV4B,IACA/C,EAAKgD,eAAeC,UAAYC,EAAYjB,IAE3BJ,EAAaK,MAC5B,SAAAC,G,OAAiBA,EAAcC,MAAQH,EAAKG,G,IAElC,C,uBACVf,QAAQC,IAAI,yBACZI,EAASiB,YAAc,O,6EAIzBtB,QAAQC,IAAGJ,EAAAK,I,2DAlBwBqB,MAAAtC,KAAAuC,U,CA9CvCxB,QAAQC,IAAIO,GA0CZH,EAASyB,iBAAiB,S,SAnBuBV,G,OAA3BD,EAA0BI,MAAAtC,KAAAuC,U,UGxDhDO,EAAiBjE,EAAA,SAAAkE,aAA6C,SAAWlE,EAAA,SAAAmE,QAA6C,S,MCAtHC,EAAiBpE,EAAA,SAAAkE,aAA6C,SAAWlE,EAAA,SAAAmE,QAA6C,S,MJqG/G,SAASJ,EAAYjB,GAStBA,EAPFG,IADF,IAEEoB,EAMEvB,EANFuB,WACAC,EAKExB,EALFwB,OACAC,EAIEzB,EAJFyB,MACAC,EAGE1B,EAHF0B,YACAC,EAEE3B,EAFF2B,mBAAkBC,EAAAxD,EAAAyD,EAAA,CAEhB7B,EADF8B,UAAS,GAAWC,GAAFH,EAAA,GAAOA,EAAA,IAAkBI,GAAXJ,EAAA,GAASA,EAAA,GAAUA,EAAA,IAG/CK,GAHsDL,EAAA,GAGrC,IAAAM,IAAAf,GAGrBgB,MACIC,EAAe,IAAAF,IAAAZ,GAClBa,KACGE,EAAa,IAAAH,IAAAI,GAChBH,KAGH,MAAO,yEAImCrD,OAFAyC,EAAW,uGAGVzC,OADD2C,EAAM,qDAEP3C,OADE0C,EAAO,mDAGH1C,OAFN4C,EAAY,kGAGC5C,OADP6C,EAAmB,8EAGnB7C,OAFOuD,EAAW,8FAGZvD,OADNiD,EAAMQ,IAAI,6EAGVzD,OAFMmD,EAAe,oGAGrBnD,OADAkD,EAASO,IAAI,uEACAzD,OAAbsD,EAAa,uH,CAU9D,SAAStB,IACP/C,EAAKyE,WAAWC,UAAUC,OAAO,Y,CKpJnCJ,EAAiBpF,EAAA,SAAAkE,aAA6C,SAAWlE,EAAA,SAAAmE,QAA6C,SLiJtHtD,EAAK4E,kBAAkBzB,iBAAiB,S,SAlEAV,G,OAAlBK,EAAiBF,MAAAtC,KAAAuC,U,IAyEvC7C,EAAK6E,mBAAmB1B,iBACtB,SAIF,SAAuCV,GACrCM,IACA/C,EAAKgD,eAAeC,UAAY,E,IAIlC6B,OAAO3B,iBAAiB,WAAW,SAAAV,GACnB,WAAVA,EAAEjC,KACJuC,G,IAOJ/C,EAAK+E,cAAc5B,iBAAiB,SAEpC,SAAkCV,GAChCA,EAAEuC,OAAOrC,YAAc,gCACvBF,EAAEuC,OAAOC,mBACP,WACA,2J","sources":["node_modules/@swc/helpers/lib/_class_extract_field_descriptor.js","node_modules/@swc/helpers/lib/_class_apply_descriptor_get.js","node_modules/@swc/helpers/lib/_check_private_redeclaration.js","node_modules/@parcel/runtime-js/lib/runtime-9a639ad315ee4250.js","src/js/modal.js","node_modules/@swc/helpers/lib/_class_private_field_get.js","node_modules/@swc/helpers/lib/_class_private_field_init.js","node_modules/@parcel/runtime-js/lib/runtime-5aeee2da615570de.js","node_modules/@parcel/runtime-js/lib/runtime-d557c89a8e87a0d3.js","node_modules/@parcel/runtime-js/lib/runtime-302977d4769bac07.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classExtractFieldDescriptor;\nfunction _classExtractFieldDescriptor(receiver, privateMap, action) {\n    if (!privateMap.has(receiver)) {\n        throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n    }\n    return privateMap.get(receiver);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classApplyDescriptorGet;\nfunction _classApplyDescriptorGet(receiver, descriptor) {\n    if (descriptor.get) {\n        return descriptor.get.call(receiver);\n    }\n    return descriptor.value;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _checkPrivateRedeclaration;\nfunction _checkPrivateRedeclaration(obj, privateCollection) {\n    if (privateCollection.has(obj)) {\n        throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n    }\n}\n","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"dxLsE\\\":\\\"index.dd449e5a.js\\\",\\\"4j2Vp\\\":\\\"apple-books.652b354e.png\\\",\\\"gUbv1\\\":\\\"book-shop.1d091ebd.png\\\",\\\"dRQ8R\\\":\\\"amazon.626c9508.png\\\"}\"));","// import BooksApi from './api';\n\nimport getRefs from './refs.js';\n\nconst refs = getRefs();\n\nclass BooksApi {\n  #BASE_URL = `https://books-backend.p.goit.global/books`;\n  bookID = null;\n\n  async fetchBookByID() {\n    try {\n      const response = await fetch(`${this.#BASE_URL}/${this.bookID}`);\n      const book = await response.json();\n      return book;\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n}\n\nconst BookAPI = new BooksApi();\n\n// const modalContentEl = document.querySelector('.modal-pop-up-content');\n\n// --------------------------------------//////// код юра\n// --------------------------------------////////\n// --------------------------------------////////\nconst SHOPPING_LIST_STORAGE_KEY = 'storage-of-books'; // ключ\nconst addBtnEL = document.querySelector('.modal-pop-up-btn');\n\nconst shoppingList =\n  JSON.parse(localStorage.getItem(SHOPPING_LIST_STORAGE_KEY)) || [];\nconsole.log(shoppingList);\n\n// Функція для додавання товару у корзину\nfunction addToStorage(book) {\n  // Додаємо товар до корзини\n  shoppingList.push(book);\n  // Зберігаємо зміни в LocalStorage\n  localStorage.setItem(SHOPPING_LIST_STORAGE_KEY, JSON.stringify(shoppingList));\n}\n\n// Додавання книги у корзину\nfunction handleAddBookInStorage(data) {\n  //   Фільтрування унікальності книги\n  const isBookId = shoppingList.find(\n    bookInStorage => bookInStorage._id === data._id\n  );\n  if (isBookId) {\n    console.log('Ця книга вже у кошику');\n    return;\n  }\n  addToStorage(data);\n}\n\nexport async function handleBookElClickToStorage(e) {\n  // BookAPI.bookID = '643282b1e85766588626a080';\n\n  try {\n    const data = await BookAPI.fetchBookByID();\n    const fn = await handleAddBookInStorage(data);\n    const isBookId = shoppingList.find(\n      bookInStorage => bookInStorage._id === data._id\n    );\n    if (isBookId) {\n      console.log('добавлено у кошик');\n      addBtnEL.textContent = 'STOP';\n      return;\n    }\n  } catch (err) {\n    console.log(err);\n  }\n}\n\naddBtnEL.addEventListener('click', handleBookElClickToStorage);\n// ----------------------------------------////\n// ----------------------------------------////\n// ----------------------------------------////\nexport async function handleBookElClick(e) {\n  // const id = e.target.attributes.data_id.value;\n  BookAPI.bookID = '643282b1e85766588626a080';\n\n  try {\n    const data = await BookAPI.fetchBookByID();\n    toggleModal();\n    refs.modalContentEl.innerHTML = createModal(data);\n\n    const isBookId = shoppingList.find(\n      bookInStorage => bookInStorage._id === data._id\n    );\n    if (isBookId) {\n      console.log('Ця книга вже у кошику');\n      addBtnEL.textContent = 'STOP';\n      return;\n    }\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nexport function createModal(data) {\n  const {\n    _id,\n    book_image,\n    author,\n    title,\n    description,\n    amazon_product_url,\n    buy_links: [amazon, apple, bandn, million, bookshop, indie],\n  } = data;\n\n  const appleBooksIcon = new URL(\n    '../images/shops/apple-books.png',\n    import.meta.url\n  ).href;\n  const bookShopIcon = new URL('../images/shops/book-shop.png', import.meta.url)\n    .href;\n  const amazonIcon = new URL('../images/shops/amazon.png', import.meta.url)\n    .href;\n  // addBtnEL.setAttribute('data_idi', `${_id}`);\n\n  return `\n                        \n              <img class=\"modal-img\" src=\"${book_image}\"/>\n              <div class='modal-book-atributes'>\n              <p class=\"modal-book-title\">${title}</p>\n              <p class=\"modal-book-author\">${author}</p>\n              <p class=\"modal-book-desc\">${description}</p>\n              <div class=\"modal-shops\">\n              <a class=\"modal-shop-link\" href=\"${amazon_product_url}\" target=\"_blank\">\n              <img class=\"modal-shop-img amazon\" src=\"${amazonIcon}\" alt=\"Amazon link\"/>\n              </a>\n              <a class=\"modal-shop-link\" href=\"${apple.url}\" target=\"_blank\">\n              <img class=\"modal-shop-img apple\" src=\"${appleBooksIcon}\" alt=\"Apple Books link\" />\n              </a>\n              <a class=\"modal-shop-link\" href=\"${bookshop.url}\" target=\"_blank\">\n              <img class=\"modal-shop-img\" src=\"${bookShopIcon}\" alt=\"Book Shop link\"/>\n              </a>\n              </div>\n              </div>\n              \n          `;\n}\n\nrefs.openModalPopUpBtn.addEventListener('click', handleBookElClick);\n\nfunction toggleModal() {\n  refs.modalPopUp.classList.toggle('is-hidden');\n}\n\n// Close PopUp Modal by Close btn click\nrefs.closeModalPopUpBtn.addEventListener(\n  'click',\n  handleModalPopUpCloseBtnClick\n);\n\nfunction handleModalPopUpCloseBtnClick(e) {\n  toggleModal();\n  refs.modalContentEl.innerHTML = '';\n}\n\n// Close PopUp Modal by Esc click\nwindow.addEventListener('keydown', e => {\n  if (e.key === 'Escape') {\n    toggleModal();\n  }\n});\n\n// Close PopUp Modal by backdrop click\n// !!!\n\nrefs.modalPopUpBtn.addEventListener('click', handleModalPopUpBtnClick);\n\nfunction handleModalPopUpBtnClick(e) {\n  e.target.textContent = 'Remove from the shopping list';\n  e.target.insertAdjacentHTML(\n    'afterend',\n    '<p class=\"modal-message\">Congratulations! You have added the book to the shopping list. To delete, press the button \"Remove from the shopping list.\"</p>'\n  );\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateFieldGet;\nvar _classExtractFieldDescriptor = _interopRequireDefault(require(\"./_class_extract_field_descriptor\"));\nvar _classApplyDescriptorGet = _interopRequireDefault(require(\"./_class_apply_descriptor_get\"));\nfunction _classPrivateFieldGet(receiver, privateMap) {\n    var descriptor = (0, _classExtractFieldDescriptor).default(receiver, privateMap, \"get\");\n    return (0, _classApplyDescriptorGet).default(receiver, descriptor);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateFieldInit;\nvar _checkPrivateRedeclaration = _interopRequireDefault(require(\"./_check_private_redeclaration\"));\nfunction _classPrivateFieldInit(obj, privateMap, value) {\n    (0, _checkPrivateRedeclaration).default(obj, privateMap);\n    privateMap.set(obj, value);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('dxLsE') + require('./helpers/bundle-manifest').resolve(\"4j2Vp\");","module.exports = require('./helpers/bundle-url').getBundleURL('dxLsE') + require('./helpers/bundle-manifest').resolve(\"gUbv1\");","module.exports = require('./helpers/bundle-url').getBundleURL('dxLsE') + require('./helpers/bundle-manifest').resolve(\"dRQ8R\");"],"names":["Object","defineProperty","module","exports","value","default","receiver","privateMap","action","has","TypeError","get","descriptor","call","obj","privateCollection","parcelRequire","register","JSON","parse","$bpxeT","$37616d1d2d9e1de3$exports","$37616d1d2d9e1de3$var$_classExtractFieldDescriptor","$37616d1d2d9e1de3$var$_classApplyDescriptorGet","$37616d1d2d9e1de3$var$_interopRequireDefault","__esModule","$665bb80dc57e205a$exports","$665bb80dc57e205a$var$_checkPrivateRedeclaration","set","$40873ecf3c18e122$var$refs","$40873ecf3c18e122$var$_BASE_URL","WeakMap","$40873ecf3c18e122$var$BookAPI","BooksApi","$parcel$interopDefault","this","$hKHmD","key","$2TvXO","mark","_callee","response","book","fetch","concat","_this","bookID","_ctx","sent","json","console","log","t0","message","$40873ecf3c18e122$var$SHOPPING_LIST_STORAGE_KEY","$40873ecf3c18e122$var$addBtnEL","document","querySelector","$40873ecf3c18e122$var$shoppingList","localStorage","getItem","$40873ecf3c18e122$var$handleAddBookInStorage","data","find","bookInStorage","_id","push","setItem","stringify","$40873ecf3c18e122$var$_handleBookElClickToStorage","e","fetchBookByID","textContent","apply","arguments","$40873ecf3c18e122$var$_handleBookElClick","$40873ecf3c18e122$var$toggleModal","modalContentEl","innerHTML","$40873ecf3c18e122$export$b63bc83cbdd7b6d5","addEventListener","$7696bcbaa4d028d1$exports","getBundleURL","resolve","$290dd358e4c629f8$exports","book_image","author","title","description","amazon_product_url","_buy_links","$1t1Wn","buy_links","apple","bookshop","appleBooksIcon","URL","href","bookShopIcon","amazonIcon","$588ba73806900a6c$exports","url","modalPopUp","classList","toggle","openModalPopUpBtn","closeModalPopUpBtn","window","modalPopUpBtn","target","insertAdjacentHTML"],"version":3,"file":"index.dd449e5a.js.map"}