{"mappings":"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","sources":["src/index.js","src/js/categories-menu/renderCategoriesList.js","src/js/categories-menu/activeCatBtnSwitcher.js","src/js/categories-menu/handleCategoryClick.js","src/js/books-by-category/fetchSelectedBooks.js","src/js/books-by-category/renderSelectedCategory.js","src/js/_shared/oneBookMarkup.js","src/js/books-by-category/allBooksMarkup.js","src/js/bestsellers/fetchBooks.js","src/js/bestsellers/bestsellers.js","src/js/_shared/render-main-title.js","src/js/bestsellers/seeMore.js","src/js/modal-popup/modal.js"],"sourcesContent":["// Header\nimport './js/header/header-height-adjust.js';\nimport './js/header/color-scheme-switcher.js';\nimport './js/header/burger-mobile.js';\n\n// Fetch\n// import './js/fetchSelectedBooks';\nimport './js/components/spinner.js';\n\n// Sidebar\n// Category selection menu\nimport './js/categories-menu/renderCategoriesList.js';\nimport './js/categories-menu/activeCatBtnSwitcher.js';\nimport './js/categories-menu/handleCategoryClick.js';\n\n// Support Ukraine block\nimport './js/support-ukraine/support.js';\n\n// Content part\nimport './js/bestsellers/bestsellers';\nimport './js/bestsellers/seeMore.js';\n\n// Modal - popup\nimport './js/modal-popup/modal.js';\n\n// Authorization\nimport './js/firebase/firebase';\nimport './js/firebase/authservice';\nimport './js/firebase/firebaseservise';\n\nimport './js/modal-login/authorization-form.js';\nimport './js/modal-login/form-validator.js';\n\n// Scroll-to-top button\nimport './js/components/back-to-top';\n","import axios from 'axios';\nimport getRefs from '../refs';\n\nconst { categoryListEl } = getRefs();\n\nasync function categoriesArray() {\n  try {\n    const { data } = await axios.get(\n      'https://books-backend.p.goit.global/books/category-list'\n    );\n\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport async function renderCategories() {\n  try {\n    const array = await categoriesArray();\n    const inAlphabeticalOrder = array.sort((a, b) =>\n      a.list_name.localeCompare(b.list_name)\n    );\n\n    for (const arr of inAlphabeticalOrder) {\n      const listItem = document.createElement('li');\n      const catBtn = document.createElement('button');\n      catBtn.classList.add('category-btn');\n      catBtn.textContent = `${arr.list_name}`;\n      catBtn.setAttribute('id', arr.list_name);\n      categoryListEl.appendChild(listItem);\n      listItem.appendChild(catBtn);\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nrenderCategories();\n","import getRefs from '../refs';\n\nconst { categoriesListContainer } = getRefs();\n\ncategoriesListContainer.addEventListener('click', activeCatBtnSwitch);\n\nfunction activeCatBtnSwitch(e) {\n  e.preventDefault();\n  if (e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  const activeBtn = e.target;\n  const prevActiveBtn = document.querySelector('.active-category');\n\n  if (prevActiveBtn && prevActiveBtn !== activeBtn) {\n    prevActiveBtn.classList.remove('active-category');\n  }\n\n  activeBtn.classList.add('active-category');\n}\n","import getRefs from '../refs';\nconst { categoryListEl, selectedBooksListEl, mainTitle } = getRefs();\n\nimport { fetchSelectedBooks } from '../books-by-category/fetchSelectedBooks';\nimport { renderBooksByCategory } from '../books-by-category/renderSelectedCategory';\nimport { renderTopBooks } from '../bestsellers/bestsellers';\n\nimport { scrollToTop } from '../components/back-to-top';\nimport { renderMainTitle } from '../_shared/render-main-title';\n\n// ########################################################\n\n// Listen to clicks on category list items in sidebar\ncategoryListEl.addEventListener('click', onCategoryClick);\n\n// ########################################################\n\n// Handler\nasync function onCategoryClick(event) {\n  event.preventDefault();\n\n  if (!event.target.classList.contains('category-btn')) return;\n\n  if (event.target.classList.contains('all-categories-btn')) {\n    mainTitle.innerHTML = `Best Seller <span class=\"main-title--last-word-static\">Books</span>`;\n    // selectedBooksListEl.innerHTML = '';\n    await renderTopBooks();\n    return;\n  }\n\n  const id = event.target.attributes.id.value;\n  const data = await fetchSelectedBooks(id);\n\n  // Change content part title and colorize its last word\n  renderMainTitle(id);\n\n  renderBooksByCategory(data);\n  scrollToTop();\n}\n","import axios from 'axios';\nimport Notiflix from 'notiflix';\n\nexport async function fetchSelectedBooks(category) {\n  // Notiflix.Loading.pulse('Please hang on...');\n  Notiflix.Loading.dots('Please wait');\n\n  try {\n    const { data } = await axios.get(\n      `https://books-backend.p.goit.global/books/category?category=${category}`\n    );\n    Notiflix.Loading.remove();\n    return data;\n  } catch (error) {\n    Notiflix.Loading.remove();\n    Notiflix.Notify.failure('Something went wrong. Please try again');\n    console.log(error);\n  }\n}\n","import getRefs from '../refs';\nconst { renderingContainer } = getRefs();\n\nimport { makeCategoryBooksMarkup } from '../books-by-category/allBooksMarkup';\n\n// Render content for an individual category of books\nexport function renderBooksByCategory(data) {\n  const markup = makeCategoryBooksMarkup(data);\n  renderingContainer.innerHTML = markup;\n}\n","export function createBookMarkup({\n  _id: id,\n  title,\n  author,\n  description,\n  // list_name,\n  book_image: image,\n  // book_image_width: width,\n  // book_image_height: height,\n}) {\n  return `\n    <a class=\"book-link\" href=\"\" aria-label=\"Book thumbnail\">\n      <div class=\"book-thumb\">\n        <img class=\"book-image\" src=\"${image}\" loading=\"lazy\" data_id=${id} alt=\"${description}\"/>\n        <div class=\"book-image-overlay\" data_id=${id} aria-label=\"${title}\">\n          <p class=\"book-image-overlay-text\">Quick view</p>\n        </div>\n      </div>\n      <div class=\"book-item-meta\">\n        <h3 class=\"book-title\">${title}</h3>\n        <p class=\"book-author\">${author}</p>\n      </div>\n    </a>\n  `;\n}\n","import { createBookMarkup } from '../_shared/oneBookMarkup';\n\n// Create markup of all books in a selected category\nexport function makeCategoryBooksMarkup(data) {\n  return `\n      <ul class=\"category-books-list\">\n        ${data\n          .map(element => {\n            return `\n            <li class=\"books-list-item\">\n              ${createBookMarkup(element)}\n            </li>\n          `;\n          })\n          .join('')}\n      </ul>\n    `;\n}\n","import axios from 'axios';\nimport Notiflix from 'notiflix';\n\nexport default async function getTopBooksArray() {\n  Notiflix.Loading.dots();\n  // Notiflix.Loading.pulse();\n\n  try {\n    const { data } = await axios.get(\n      'https://books-backend.p.goit.global/books/top-books'\n    );\n    Notiflix.Loading.remove();\n\n    return data;\n  } catch (error) {\n    Notiflix.Loading.remove();\n    Notiflix.Notify.failure('Something went wrong. Please try again');\n    console.log(error);\n  }\n}\n","import getTopBooksArray from './fetchBooks';\nimport { createBookMarkup } from '../_shared/oneBookMarkup';\nimport getRefs from '../refs.js';\n\nconst { renderingContainer } = getRefs();\n\n// Fetch and render bestsellers:\nexport async function renderTopBooks() {\n  let data;\n  const savedData = sessionStorage.getItem('bestsellers');\n\n  // Check if there's saved data in sessionStorage...\n  if (savedData) {\n    data = JSON.parse(savedData);\n  } else {\n    // ...otherwise fetch data from server\n    try {\n      data = await getTopBooksArray();\n      sessionStorage.setItem('bestsellers', JSON.stringify(data));\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  const bestsellerListMarkup = `\n      <ul class=\"category-blocks-list\">\n        ${data\n          .map(\n            ({ list_name, books }) => `\n              <li class=\"bestseller-category\">\n          <h3 class=\"bestseller-category-title\">${list_name}</h3>\n          <ul class=\"books-list\">\n            ${books\n              .map(\n                book => `\n              <li class=\"books-list-item bestsellers-book-item\">\n                ${createBookMarkup(book)}\n              </li>\n            `\n              )\n              .join('')}\n          </ul>\n          <button type=\"button\" class=\"button see-more-btn\" id=\"${list_name}\">See more</button>\n        </li>\n            `\n          )\n          .join('')}\n      </ul>\n    `;\n\n  renderingContainer.innerHTML = bestsellerListMarkup;\n}\n\nrenderTopBooks();\n","import getRefs from '../refs';\nconst { mainTitle } = getRefs();\n\n// Colorize the last word in a category title\nexport function renderMainTitle(id) {\n  //\n  const allWordsButLast = id.split(' ').slice(0, -1).join(' ');\n\n  const words = id.split(' ');\n  const lastWord = words[words.length - 1];\n\n  mainTitle.innerHTML = `${allWordsButLast} <span class=\"main-title--last-word-static\">${lastWord}</span>`;\n}\n","import getRefs from '../refs';\nconst { categoryContainerEl } = getRefs();\n\nimport { fetchSelectedBooks } from '../books-by-category/fetchSelectedBooks';\nimport { renderBooksByCategory } from '../books-by-category/renderSelectedCategory';\nimport { scrollToTop } from '../components/back-to-top';\nimport { renderMainTitle } from '../_shared/render-main-title';\n\n// ########################################################\n\ncategoryContainerEl.addEventListener('click', seeMoreBtnClickHandler);\n\n// ########################################################\n\nasync function seeMoreBtnClickHandler(e) {\n  if (!e.target.classList.contains('see-more-btn')) return;\n\n  // e.preventDefault();\n\n  const id = e.target.attributes.id.value;\n  const data = await fetchSelectedBooks(id);\n\n  // Change content part title and colorize its last word\n  renderMainTitle(id);\n\n  // Set active category in sidebar\n  const categoriesBtn = document.querySelectorAll('.category-btn');\n  const activeCategoryBtn = document.querySelector('.active-category');\n  for (const btn of categoriesBtn) {\n    if (btn.textContent === id) {\n      btn.classList.add('active-category');\n    }\n  }\n  activeCategoryBtn.classList.remove('active-category');\n\n  renderBooksByCategory(data);\n  scrollToTop();\n}\n","import getRefs from '../refs';\nconst refs = getRefs();\n\nimport getIconPaths from '../icon-path-refs';\n\nrefs.categoryContainerEl.addEventListener('click', function (e) {\n  // e.target was the clicked element\n  e.preventDefault();\n  if (\n    e.target.matches('.book-image') ||\n    e.target.matches('.book-image-overlay')\n  ) {\n    handleBookElClick(e);\n  }\n});\n\nclass BooksApi {\n  #BASE_URL = `https://books-backend.p.goit.global/books`;\n  bookID = null;\n\n  async fetchBookByID() {\n    try {\n      const response = await fetch(`${this.#BASE_URL}/${this.bookID}`);\n      const book = await response.json();\n      return book;\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n}\n\nconst BookAPI = new BooksApi();\nconst SHOPPING_LIST_STORAGE_KEY = 'storage-of-books'; // ключ\n\nconst shoppingList =\n  JSON.parse(localStorage.getItem(SHOPPING_LIST_STORAGE_KEY)) || [];\n// console.log(shoppingList);\n\n// Add item to shopping list\nfunction addToStorage(book) {\n  shoppingList.push(book);\n  localStorage.setItem(SHOPPING_LIST_STORAGE_KEY, JSON.stringify(shoppingList));\n}\n\n// Add item to shopping list, if already added - change the button's textContent and remove the item from shopping list\nfunction handleAddBookInStorage(data) {\n  const isBookId = shoppingList.find(\n    bookInStorage => bookInStorage._id === data._id\n  );\n\n  if (isBookId) {\n    const dataBookID = refs.addBtnEL.getAttribute('data_id_of_book');\n\n    const bookIndex = shoppingList.findIndex(\n      bookInStorage => bookInStorage._id === dataBookID\n    );\n\n    shoppingList.splice(bookIndex, 1);\n    localStorage.setItem(\n      SHOPPING_LIST_STORAGE_KEY,\n      JSON.stringify(shoppingList)\n    );\n    refs.addBtnEL.textContent = 'Add to shopping list';\n    modalMessage.remove();\n    return;\n  }\n\n  addToStorage(data);\n  refs.addBtnEL.textContent = 'Remove from the shopping list';\n  refs.addBtnEL.after(modalMessage);\n}\n\n// Modal window button click handler\nexport async function handleBookElClickToStorage(e) {\n  try {\n    const data = await BookAPI.fetchBookByID();\n    handleAddBookInStorage(data);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nrefs.addBtnEL.addEventListener('click', handleBookElClickToStorage);\n\n// Create a message after addBtnEL button has been pressed\nconst modalMessage = document.createElement('p');\nmodalMessage.classList.add('modal-message');\nmodalMessage.textContent =\n  'Congratulations! You have added the book to the shopping list. To delete, press the button \"Remove from the shopping list.\"';\n\n// #################################################################\n\n// Book card click handler\nexport async function handleBookElClick(e) {\n  BookAPI.bookID = e.target.attributes.data_id.value;\n\n  try {\n    const data = await BookAPI.fetchBookByID();\n    refs.modalPopUp.classList.remove('is-hidden');\n    refs.modalContentEl.innerHTML = createModal(data);\n    document.body.style.overflow = 'hidden';\n    refs.closeModalPopUpBtn.addEventListener(\n      'click',\n      handleModalPopUpCloseBtnClick\n    );\n    document.addEventListener('keydown', handleEscapeKeyDown);\n    document.addEventListener('click', handleBackdropClick);\n    const isBookId = shoppingList.find(\n      bookInStorage => bookInStorage._id === data._id\n    );\n    if (isBookId) {\n      refs.addBtnEL.textContent = 'Remove from the shopping list';\n      refs.addBtnEL.after(modalMessage);\n      return;\n    }\n    refs.addBtnEL.textContent = 'Add to shopping list';\n    modalMessage.remove();\n  } catch (err) {\n    console.log(err);\n  }\n}\n\n// ####################################################################\n\n// Create modal markup\n\nexport function createModal(data) {\n  const {\n    _id,\n    book_image,\n    author,\n    title,\n    description,\n    buy_links: [amazon, apple, bookshop],\n  } = data;\n\n  const { appleBooksIconPath, bookShopIconPath, amazonIconPath } =\n    getIconPaths();\n\n  refs.addBtnEL.setAttribute('data_id_of_book', `${_id}`);\n\n  return `            \n    <img class=\"modal-img\" src=\"${book_image}\" alt=\"book cover\" />\n    <div class='modal-book-attributes'>\n      <p class=\"modal-book-title\">${title}</p>\n      <p class=\"modal-book-author\">${author}</p>\n      <p class=\"modal-book-desc\">${description}</p>\n      <div class=\"modal-shops\">\n        <a class=\"modal-shop-link\" href=\"${amazon.url}\" target=\"_blank\" rel=\"noopener noreferrer nofollow\" aria-label=\"Amazon link\">\n          <img class=\"modal-shop-img shopping-shopimg amazon\" src=\"${amazonIconPath}\" alt=\"Amazon link\" aria-label=\"Buy this book on Amazon\" />\n        </a>\n        <a class=\"modal-shop-link\" href=\"${apple.url}\" target=\"_blank\" rel=\"noopener noreferrer nofollow\" aria-label=\"Apple Books link\">\n          <img class=\"modal-shop-img shopping-shopimg apple\" src=\"${appleBooksIconPath}\" alt=\"Apple Books link\"  aria-label=\"Buy this book on Apple Books\"/>\n        </a>\n        <a class=\"modal-shop-link\" href=\"${bookshop.url}\" target=\"_blank\" rel=\"noopener noreferrer nofollow\" aria-label=\"BookShop link\">\n          <img class=\"modal-shop-img shopping-shopimg book-shop\" src=\"${bookShopIconPath}\" alt=\"BookShop link\" aria-label=\"Buy this book on BookShop\"/>\n        </a>\n      </div>\n    </div>\n`;\n}\n\nfunction handleModalPopUpCloseBtnClick(e) {\n  refs.modalPopUp.classList.add('is-hidden');\n  document.body.style.removeProperty('overflow');\n}\n\nfunction handleBackdropClick(e) {\n  if (e.target == refs.modalPopUp) {\n    refs.modalPopUp.classList.add('is-hidden');\n    document.body.style.removeProperty('overflow');\n  }\n}\n\nfunction handleEscapeKeyDown(e) {\n  if (e.key === 'Escape') {\n    refs.modalPopUp.classList.add('is-hidden');\n    document.body.style.removeProperty('overflow');\n  }\n}\n\nrefs.closeModalPopUpBtn.removeEventListener(\n  'click',\n  handleModalPopUpCloseBtnClick\n);\n\ndocument.removeEventListener('click', handleBackdropClick);\n\ndocument.removeEventListener('keydown', handleEscapeKeyDown);\n"],"names":["parcelRequire","$2shzp","categoryListEl","$f1c14a89e62307e3$var$categoryListEl","$krGWQ","default","async","inAlphabeticalOrder","data","get","error","console","log","$f1c14a89e62307e3$var$categoriesArray","sort","a","b","list_name","localeCompare","arr","listItem","document","createElement","catBtn","classList","add","textContent","setAttribute","appendChild","$f1c14a89e62307e3$export$f20c709553293f6e","categoriesListContainer","$d1fa8bc124287ad2$var$categoriesListContainer","addEventListener","e","preventDefault","target","nodeName","activeBtn","prevActiveBtn","querySelector","remove","$73ff72613ef67f8f$export$a18ca9cdd4a7f115","category","$parcel$interopDefault","$7Y9D8","Loading","dots","Notify","failure","$2f5c33b471d6d879$export$fc330cc8afb2a391","_id","id","title","author","description","book_image","image","$24631a2e2c9b4072$export$ca850cdbb840cfa","map","element","join","renderingContainer","$9fdf512115e5ec05$var$renderingContainer","$9fdf512115e5ec05$export$e3a458789c8a5044","markup","innerHTML","$385b37ba044f484b$export$2e2bcd8739ae039","$c7b8250d1da2e69b$var$renderingContainer","$c7b8250d1da2e69b$export$897fb17cde4e950b","savedData","sessionStorage","getItem","JSON","parse","setItem","stringify","bestsellerListMarkup","books","book","mainTitle","$c1db9bcd65d0f4a2$var$mainTitle","$c1db9bcd65d0f4a2$export$86c67608665d4c5e","allWordsButLast","split","slice","words","lastWord","length","$a4b41837e188bc2f$var$categoryListEl","selectedBooksListEl","$a4b41837e188bc2f$var$selectedBooksListEl","$a4b41837e188bc2f$var$mainTitle","event","contains","attributes","value","$eq7JK","scrollToTop","categoryContainerEl","$7f21e673f93aa12d$var$categoryContainerEl","categoriesBtn","querySelectorAll","activeCategoryBtn","btn","$d1022db8c9b62806$var$refs","matches","$d1022db8c9b62806$var$BookAPI","bookID","data_id","fetchBookByID","modalPopUp","modalContentEl","buy_links","amazon","apple","bookshop","appleBooksIconPath","bookShopIconPath","amazonIconPath","$iO0l9","addBtnEL","url","$d1022db8c9b62806$export$b63bc83cbdd7b6d5","body","style","overflow","closeModalPopUpBtn","$d1022db8c9b62806$var$handleModalPopUpCloseBtnClick","$d1022db8c9b62806$var$handleEscapeKeyDown","$d1022db8c9b62806$var$handleBackdropClick","$d1022db8c9b62806$var$shoppingList","find","bookInStorage","after","$d1022db8c9b62806$var$modalMessage","err","$d1022db8c9b62806$export$8ec645b97243d00e","BASE_URL","response","fetch","this","json","message","$d1022db8c9b62806$var$SHOPPING_LIST_STORAGE_KEY","localStorage","$d1022db8c9b62806$var$handleAddBookInStorage","dataBookID","getAttribute","bookIndex","findIndex","splice","push","removeProperty","key","removeEventListener"],"version":3,"file":"index.b8d02990.js.map"}