{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","src/js/shopping-list.js","node_modules/@parcel/runtime-js/lib/runtime-5f67503d7a5bf9d9.js","node_modules/@parcel/runtime-js/lib/runtime-cf36cf5ab5731be9.js","node_modules/@parcel/runtime-js/lib/runtime-ec45650cc0a3e24f.js","node_modules/@parcel/runtime-js/lib/runtime-5d2ea5d597251bbc.js","node_modules/@parcel/runtime-js/lib/runtime-3a31b2053d6b0100.js","src/shopping-list.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","import getRefs from './refs.js';\n\nconst {\n  divEl,\n  paginationContainerPages,\n  paginationContainerBackBtn,\n  paginationContainerEndBtn,\n  startButton,\n  previousButton,\n  nextButton,\n  endButton,\n} = getRefs();\n\nconst SHOPPING_LIST_STORAGE_KEY = 'storage-of-books'; // ключ\nconst pictureOfBooks = new URL('../images/shoppingbook1.png', import.meta.url)\n  .href;\nconst shoppingList =\n  JSON.parse(localStorage.getItem(SHOPPING_LIST_STORAGE_KEY)) || [];\n\n// !===============Paginagions variables=================\n// !=====================================================\nconst pageSize = 3;\nlet totalPages = Math.ceil(shoppingList.length / pageSize);\nlet currentPage = 1;\n// console.log(currentPage);\nlet startIndex = (currentPage - 1) * pageSize;\nlet endIndex = startIndex + pageSize;\nlet itemsOnPage = shoppingList.slice(startIndex, endIndex);\n\n// Рендер розмітки книг, які збережені у LS\nfunction renderMarkUp(itemsOnPage) {\n  const appleBooksIcon = new URL(\n    '../images/shops/apple-books.png',\n    import.meta.url\n  ).href;\n  const bookShopIcon = new URL('../images/shops/book-shop.png', import.meta.url)\n    .href;\n  const amazonIcon = new URL('../images/shops/amazon.png', import.meta.url)\n    .href;\n\n  return itemsOnPage\n    .map(\n      ({\n        _id,\n        title,\n        author,\n        description,\n        list_name,\n        book_image,\n        amazon_product_url,\n        buy_links: [apple, bookshop],\n      }) => {\n        return `<article class=\"shopping__card\">\n  <div class=\"grid-img\">\n    <img\n      class=\"shopping__card-img\"\n      src=\"${book_image}\"\n      alt=\"${title}\"\n    />\n  </div>\n\n  <div class=\"grid-title\">\n    <h3 class=\"shopping__card-title\">${title}</h3>\n    <p class=\"shopping__card-category\">${list_name}</p>\n  </div>\n\n  <div class=\"grid-description\">\n    <p class=\"shopping__card-description\">${description}</p>\n  </div>\n\n  <div class=\"grid-author\">\n    <p class=\"shopping__card-author\">${author}</p>\n  </div>\n\n  <div class=\"grid-shoplist\">\n    <ul class=\"shopping__card-shoplist\">\n      <li class=\"store\"><a \"modal-shop-img\" href=\"${amazon_product_url}\" target=\"_blank\"><img class=\"modal-shop-img shopping-shopimg shopping-img-amazon\" src=\"${amazonIcon}\" alt=\"Amazon\"/>\n              </a></li>\n      <li class=\"store\"><a \"modal-shop-img\" href=\"${apple.url}\" target=\"_blank\"><img class=\"modal-shop-img shopping-shopimg shopping-img-apple\" src=\"${appleBooksIcon}\" alt=\"Apple\" /></a></li>\n      <li class=\"store\"><a \"modal-shop-img\" href=\"${bookshop.url}\" target=\"_blank\"><img class=\"modal-shop-img shopping-shopimg shopping-img-bookshop\" src=\"${bookShopIcon}\" alt=\"Book\"/></a></li>\n    </ul>\n  </div>\n  <button class=\"shopping__card-btn\" type=\"button\" data-book-id=\"${_id}\"><svg class=\"icon-trash\" data-book-id=\"${_id}\" width=\"17\" height=\"17\"><use href=\"/symbol-defs.a8b2e413.svg#icon-trash\"></use></svg>\n  </button>\n</article>\n\n        `;\n      }\n    )\n    .join('');\n}\n\nfunction isEmpty() {\n  if (!shoppingList.length) {\n    divEl.innerHTML = `<div class=\"is-empty__wrapper\"><p class=\"is-empty__info\">This page is empty, add some books and proceed to order.</p><img class=\"is-empty__picture\" src=\"${pictureOfBooks}\" alt=\"Shop is Empty\"></div >`;\n    return;\n  }\n  divEl.insertAdjacentHTML('beforeend', renderMarkUp(itemsOnPage));\n}\n\nisEmpty();\n\n// Видалення книги з корзини при натиску на кнопку\ndivEl.addEventListener('click', event => {\n  if (event.target.closest('.shopping__card-btn')) {\n    const BookID = event.target.getAttribute('data-book-id');\n\n    const bookIndex = shoppingList.findIndex(\n      bookInStorage => bookInStorage._id === BookID\n    );\n\n    shoppingList.splice(bookIndex, 1);\n    // Зберігаємо зміни в LocalStorage\n    localStorage.setItem(\n      SHOPPING_LIST_STORAGE_KEY,\n      JSON.stringify(shoppingList)\n    );\n\n    divEl.innerHTML = renderMarkUp(sliceArrayBooks());\n    destoyChieldElemente(paginationContainerPages);\n    checkingArrayBooks();\n\n    if (!shoppingList.length) {\n      refs.divEl.innerHTML = `<div class=\"is-empty__wrapper\"><p class=\"is-empty__info\">This page is empty, add some books and proceed to order.</p><img class=\"is-empty__picture\" src=\"${pictureOfBooks}\" alt=\"Shop is Empty\"></div >`;\n      return;\n    }\n  }\n});\n\n// !=====================Paginations==========================\n// !==========================================================\nfor (let i = 1; i <= totalPages; i++) {\n  if (shoppingList.length <= 3) {\n    return;\n  }\n\n  const pageNumber = i;\n  // creating button paginations\n  const button = document.createElement('button');\n  // creating class button\n  button.classList.add('paginations__btn');\n  button.classList.add('paginations__btn--pages');\n  // creating number button\n  button.textContent = i;\n\n  activDisplayFlexOnElement(paginationContainerBackBtn);\n  activDisplayFlexOnElement(paginationContainerEndBtn);\n\n  // event for rendering book after click on button\n  button.addEventListener('click', () => {\n    currentPage = pageNumber;\n    console.log(currentPage);\n    // delete markup books before creating new murkup\n    deleteMurkup();\n    createNewBooks();\n    removeDisableforElement(startButton);\n    removeDisableforElement(endButton);\n  });\n  // add button after cteated\n  paginationContainerPages.appendChild(button);\n}\n\n// handler for previous Button\npreviousButton.addEventListener('click', () => {\n  if (currentPage > 1) {\n    currentPage--;\n    deleteMurkup();\n    createNewBooks();\n    removeDisableforElement(endButton);\n  }\n});\n// handler for next Button\nnextButton.addEventListener('click', () => {\n  if (currentPage < totalPages) {\n    currentPage++;\n    deleteMurkup();\n    createNewBooks();\n    removeDisableforElement(startButton);\n  }\n});\n// handler for start Button\nstartButton.addEventListener('click', () => {\n  currentPage = 1;\n  deleteMurkup();\n  createNewBooks();\n  addDisableforElement(startButton);\n  removeDisableforElement(endButton);\n});\n\n// handler for end Button\nendButton.addEventListener('click', () => {\n  currentPage = totalPages;\n  deleteMurkup();\n  createNewBooks();\n  addDisableforElement(endButton);\n  removeDisableforElement(startButton);\n});\n\n// !==================functionsPaginations====================\n// !==========================================================\n\nfunction deleteMurkup() {\n  divEl.innerHTML = '';\n}\n\nfunction sliceArrayBooks() {\n  startIndex = (currentPage - 1) * pageSize;\n  endIndex = startIndex + pageSize;\n  return shoppingList.slice(startIndex, endIndex);\n}\n\nfunction createNewBooks() {\n  divEl.insertAdjacentHTML('beforeend', renderMarkUp(sliceArrayBooks()));\n}\n\nfunction removeDisableforElement(element) {\n  element.disabled = false;\n}\n\nfunction addDisableforElement(element) {\n  element.disabled = true;\n}\n\nfunction activDisplayFlexOnElement(element) {\n  element.style.display = 'flex';\n}\n\nfunction activDisplayNoneOnElement(element) {\n  element.style.display = 'none';\n}\n\nfunction destoyChieldElemente(element) {\n  const a = shoppingList.length / 3;\n  if (Math.round(a) === a) {\n    return element.lastElementChild.remove();\n  } else {\n    return;\n  }\n}\n\nfunction checkingArrayBooks() {\n  if (shoppingList.length <= 3) {\n    activDisplayNoneOnElement(paginationContainerBackBtn);\n    activDisplayNoneOnElement(paginationContainerEndBtn);\n    paginationContainerPages.innerHTML = '';\n  } else {\n    return;\n  }\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"5tepk\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"3dsh1\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"1Fi3j\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"6GerT\")).toString();","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"f9bx4\\\":\\\"shopping-list.8ccf2b51.js\\\",\\\"3dsh1\\\":\\\"apple-books.652b354e.png\\\",\\\"1Fi3j\\\":\\\"book-shop.1d091ebd.png\\\",\\\"6GerT\\\":\\\"amazon.626c9508.png\\\",\\\"5tepk\\\":\\\"shoppingbook1.6c062fbc.png\\\",\\\"cetEh\\\":\\\"shopping-list.785aa044.js\\\"}\"));","import getRefs from './js/refs';\nconst refs = getRefs();\n\nimport './js/spinner.js';\n\n// Header\nimport './js/header-height-adjust';\nimport './js/color-scheme-switcher';\n// import './js/burger-mobile';\n\n// Sidebar\nimport './js/support';\n\n// Content part\nimport './js/spinner.js';\nimport './js/shopping-list';\n\n// Authorization\n// import './js/firebase/firebase';\nimport './js/form-validator';\n\n// Scroll-to-top button\nimport './js/back-to-top';\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$krGWQ","parcelRequire","divEl","paginationContainerPages","paginationContainerBackBtn","paginationContainerEndBtn","startButton","previousButton","nextButton","endButton","default","SHOPPING_LIST_STORAGE_KEY","pictureOfBooks","URL","href","shoppingList","JSON","parse","localStorage","getItem","pageSize","totalPages","Math","ceil","currentPage","startIndex","endIndex","itemsOnPage","slice","renderMarkUp","appleBooksIcon","bookShopIcon","amazonIcon","map","_id","title","author","description","list_name","book_image","amazon_product_url","buy_links","apple","bookshop","url","join","insertAdjacentHTML","innerHTML","addEventListener","event","target","closest","BookID","getAttribute","bookIndex","findIndex","bookInStorage","splice","setItem","stringify","sliceArrayBooks","element","a","round","lastElementChild","remove","destoyChieldElemente","activDisplayNoneOnElement","checkingArrayBooks","refs","pageNumber","button","document","createElement","classList","add","textContent","activDisplayFlexOnElement","console","log","deleteMurkup","createNewBooks","removeDisableforElement","appendChild","disabled","addDisableforElement","style","display","module","exports","resolve","toString","register"],"version":3,"file":"shopping-list.8ccf2b51.js.map"}