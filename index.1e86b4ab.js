!function(){function t(t){return t&&t.__esModule?t.default:t}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},n={},a=o.parcelRequired7c6;null==a&&((a=function(t){if(t in e)return e[t].exports;if(t in n){var o=n[t];delete n[t];var a={id:t,exports:{}};return e[t]=a,o.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,o){n[t]=o},o.parcelRequired7c6=a),a("luyKi"),a("3JZwd"),a("tp3re"),a("64MGL");var s=a("dIxxU"),i=a("4Nugj");const{categoryListEl:l}=(0,i.default)();!async function(){try{const t=(await async function(){try{const{data:t}=await s.default.get("https://books-backend.p.goit.global/books/category-list");return t}catch(t){console.log(t)}}()).sort(((t,o)=>t.list_name.localeCompare(o.list_name)));for(const o of t){const t=document.createElement("li"),e=document.createElement("button");e.setAttribute("type","button"),e.classList.add("category-btn"),e.textContent=`${o.list_name}`,e.setAttribute("data-id",o.list_name),l.appendChild(t),t.appendChild(e)}}catch(t){console.log(t)}}();i=a("4Nugj");const{categoriesListContainer:r}=(0,i.default)();r.addEventListener("click",(function(t){if(t.preventDefault(),"BUTTON"!==t.target.nodeName)return;const o=t.target,e=document.querySelector(".active-category");e&&e!==o&&e.classList.remove("active-category");o.classList.add("active-category")}));i=a("4Nugj"),s=a("dIxxU");var c=a("6JpON");async function d(o){t(c).Loading.dots("Please wait");try{const{data:e}=await s.default.get(`https://books-backend.p.goit.global/books/category?category=${o}`);return t(c).Loading.remove(),e}catch(o){t(c).Loading.remove(),t(c).Notify.failure("Something went wrong. Please try again"),console.log(o)}}i=a("4Nugj");function u({_id:t,title:o,author:e,description:n,book_image:a}){return`\n    <a class="book-link" href="" aria-label="Book thumbnail">\n      <div class="book-thumb">\n        <img class="book-image" src="${a}" loading="lazy" data_id=${t} alt="${n}"/>\n        <div class="book-image-overlay" data_id=${t} aria-label="${o}">\n          <p class="book-image-overlay-text">Quick view</p>\n        </div>\n      </div>\n      <div class="book-item-meta">\n        <h3 class="book-title">${o}</h3>\n        <p class="book-author">${e}</p>\n      </div>\n    </a>\n  `}function g(t){return`\n      <ul class="category-books-list">\n        ${t.map((t=>`\n            <li class="books-list-item">\n              ${u(t)}\n            </li>\n          `)).join("")}\n      </ul>\n    `}const{renderingContainer:p}=(0,i.default)();function m(t){const o=g(t);p.innerHTML=o}s=a("dIxxU"),c=a("6JpON");async function f(){t(c).Loading.dots();try{const{data:o}=await s.default.get("https://books-backend.p.goit.global/books/top-books");return t(c).Loading.remove(),o}catch(o){t(c).Loading.remove(),t(c).Notify.failure("Something went wrong. Please try again"),console.log(o)}}i=a("4Nugj");const{renderingContainer:b}=(0,i.default)();async function k(){let t;const o=sessionStorage.getItem("bestsellers");if(o)t=JSON.parse(o);else try{t=await f(),sessionStorage.setItem("bestsellers",JSON.stringify(t))}catch(t){console.log(t)}const e=`\n      <ul class="category-blocks-list">\n        ${t.map((({list_name:t,books:o})=>`\n              <li class="bestseller-category">\n          <h3 class="bestseller-category-title">${t}</h3>\n          <ul class="books-list">\n            ${o.map((t=>`\n              <li class="books-list-item bestsellers-book-item">\n                ${u(t)}\n              </li>\n            `)).join("")}\n          </ul>\n          <button type="button" class="button see-more-btn" data-id="${t}">See more</button>\n        </li>\n            `)).join("")}\n      </ul>\n    `;b.innerHTML=e}k();var h=a("c0gs0");i=a("4Nugj");const{mainTitle:y}=(0,i.default)();function v(t){const o=t.split(" ").slice(0,-1).join(" "),e=t.split(" "),n=e[e.length-1];y.innerHTML=`${o} <span class="main-title--last-word-static">${n}</span>`}const{categoryListEl:L,selectedBooksListEl:w,mainTitle:B}=(0,i.default)();L.addEventListener("click",(async function(t){if(t.preventDefault(),!t.target.classList.contains("category-btn"))return;if(t.target.classList.contains("all-categories-btn"))return B.innerHTML='Best Seller <span class="main-title--last-word-static">Books</span>',void await k();const o=t.target.dataset.id,e=await d(o);v(o),m(e),(0,h.scrollToTop)()})),a("l5Qlz");i=a("4Nugj"),h=a("c0gs0");const{categoryContainerEl:E}=(0,i.default)();E.addEventListener("click",(async function(t){if(!t.target.classList.contains("see-more-btn"))return;const o=t.target.dataset.id,e=await d(o);v(o);const n=document.querySelectorAll(".category-btn"),a=document.querySelector(".active-category");for(const t of n)t.dataset.id===o&&t.classList.add("active-category");a.classList.remove("active-category"),m(e),(0,h.scrollToTop)()}));i=a("4Nugj");var _=a("dtK8v");const $=(0,i.default)();$.categoryContainerEl.addEventListener("click",(function(t){t.preventDefault(),(t.target.matches(".book-image")||t.target.matches(".book-image-overlay"))&&async function(t){N.bookID=t.target.attributes.data_id.value;try{const t=await N.fetchBookByID();$.modalPopUp.classList.remove("is-hidden"),$.modalContentEl.innerHTML=function(t){const{_id:o,book_image:e,author:n,title:a,description:s,buy_links:[i,l,r]}=t,{appleBooksIconPath:c,bookShopIconPath:d,amazonIconPath:u}=(0,_.default)();return $.addBtnEL.setAttribute("data_id_of_book",`${o}`),`            \n    <img class="modal-img" src="${e}" alt="book cover" />\n    <div class='modal-book-attributes'>\n      <p class="modal-book-title">${a}</p>\n      <p class="modal-book-author">${n}</p>\n      <p class="modal-book-desc">${s}</p>\n      <div class="modal-shops">\n        <a class="modal-shop-link" href="${i.url}" target="_blank" rel="noopener noreferrer nofollow" aria-label="Amazon link">\n          <img class="modal-shop-img shopping-shopimg amazon" src="${u}" alt="Amazon link" aria-label="Buy this book on Amazon" />\n        </a>\n        <a class="modal-shop-link" href="${l.url}" target="_blank" rel="noopener noreferrer nofollow" aria-label="Apple Books link">\n          <img class="modal-shop-img shopping-shopimg apple" src="${c}" alt="Apple Books link"  aria-label="Buy this book on Apple Books"/>\n        </a>\n        <a class="modal-shop-link" href="${r.url}" target="_blank" rel="noopener noreferrer nofollow" aria-label="BookShop link">\n          <img class="modal-shop-img shopping-shopimg book-shop" src="${d}" alt="BookShop link" aria-label="Buy this book on BookShop"/>\n        </a>\n      </div>\n    </div>\n`}(t),document.body.style.overflow="hidden",$.closeModalPopUpBtn.addEventListener("click",T),document.addEventListener("keydown",A),document.addEventListener("click",P);if(x.find((o=>o._id===t._id)))return $.addBtnEL.textContent="Remove from the shopping list",void $.addBtnEL.after(I);$.addBtnEL.textContent="Add to shopping list",I.remove()}catch(t){console.log(t)}}(t)}));const N=new class{#t="https://books-backend.p.goit.global/books";bookID=null;async fetchBookByID(){try{const t=await fetch(`${this.#t}/${this.bookID}`);return await t.json()}catch(t){console.log(t.message)}}},S="storage-of-books",x=JSON.parse(localStorage.getItem(S))||[];function C(t){if(x.find((o=>o._id===t._id))){const t=$.addBtnEL.getAttribute("data_id_of_book"),o=x.findIndex((o=>o._id===t));return x.splice(o,1),localStorage.setItem(S,JSON.stringify(x)),$.addBtnEL.textContent="Add to shopping list",void I.remove()}var o;o=t,x.push(o),localStorage.setItem(S,JSON.stringify(x)),$.addBtnEL.textContent="Remove from the shopping list",$.addBtnEL.after(I)}$.addBtnEL.addEventListener("click",(async function(t){try{C(await N.fetchBookByID())}catch(t){console.log(t)}}));const I=document.createElement("p");function T(t){$.modalPopUp.classList.add("is-hidden"),document.body.style.removeProperty("overflow")}function P(t){t.target==$.modalPopUp&&($.modalPopUp.classList.add("is-hidden"),document.body.style.removeProperty("overflow"))}function A(t){"Escape"===t.key&&($.modalPopUp.classList.add("is-hidden"),document.body.style.removeProperty("overflow"))}I.classList.add("modal-message"),I.textContent='Congratulations! You have added the book to the shopping list. To delete, press the button "Remove from the shopping list."',$.closeModalPopUpBtn.removeEventListener("click",T),document.removeEventListener("click",P),document.removeEventListener("keydown",A),a("2NTPx"),a("eOo1s"),a("fqCpV"),a("2ZAjC"),a("csoNL"),a("c0gs0")}();
//# sourceMappingURL=index.1e86b4ab.js.map
